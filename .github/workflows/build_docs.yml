name: Build PR Docs

on:
  pull_request:
    branches:
      - main
  workflow_dispatch:
    inputs:
      make_target:
        description: "Enter make target: html html-noplot docs slimfast slimgallery"
        type: string
        default: "slimfast"

concurrency:
  group: ${{ github.workflow }}-${{ github.ref }}
  cancel-in-progress: true

jobs:
  artifact-build:
    uses: napari/shared-workflows/.github/workflows/build_docs.yml@build_docs
    secrets: inherit
    with:
      main-repo: ${{ github.repository }}
      main-ref: ${{ github.sha }}
      docs-repo: napari/docs
      docs-ref: ${{ github.ref }}
      make_target: ${{ inputs.make_target || 'slimfast' }}
